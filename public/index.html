<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SALAAH TIME, Sillod ‚Äì Prayer Timings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ---- SAME CSS AS BEFORE (shortened comment) ---- */
    :root {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --primary: #15803d;
      --primary-soft: #dcfce7;
      --text-main: #111827;
      --text-muted: #6b7280;
      --border-soft: #e5e7eb;
      --radius-lg: 18px;
      --radius-full: 999px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.08);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:radial-gradient(circle at top,#ecfdf5 0,#f9fafb 45%,#f3f4f6 100%);color:var(--text-main);min-height:100vh}
    .page{max-width:1200px;margin:0 auto;padding:16px}
    .header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:16px 20px;margin-bottom:18px;background:rgba(255,255,255,0.9);border-radius:var(--radius-lg);border:1px solid rgba(209,213,219,0.6);backdrop-filter:blur(10px);box-shadow:0 10px 25px rgba(15,23,42,0.06)}
    .brand{display:flex;align-items:center;gap:14px}
    .brand-icon{width:40px;height:40px;border-radius:18px;background:radial-gradient(circle at 30% 20%,#bbf7d0,#22c55e);display:flex;align-items:center;justify-content:center;box-shadow:0 10px 20px rgba(22,163,74,0.4);position:relative;overflow:hidden}
    .brand-icon::before{content:"";position:absolute;inset:12%;border-radius:40%;border:2px solid rgba(236,253,245,0.8);border-bottom:none;border-left:none;transform:rotate(-12deg)}
    .brand-icon span{font-size:18px;color:#ecfdf5;font-weight:700;letter-spacing:.04em}
    .brand-text{display:flex;flex-direction:column;gap:2px}
    .brand-title{font-weight:700;font-size:18px;letter-spacing:.03em;text-transform:uppercase}
    .brand-subtitle{font-size:12px;color:var(--text-muted)}
    .header-right{text-align:right;font-size:12px;color:var(--text-muted)}
    .header-right strong{display:block;font-size:13px;color:var(--text-main)}
    .grid{display:grid;grid-template-columns:minmax(0,2fr) minmax(0,1.4fr);gap:18px;margin-bottom:18px}
    @media(max-width:840px){.grid{grid-template-columns:minmax(0,1fr)}.header{flex-direction:column;align-items:flex-start}.header-right{text-align:left}}
    .card{background:var(--card-bg);border-radius:var(--radius-lg);padding:18px 18px 16px;border:1px solid var(--border-soft);box-shadow:var(--shadow-soft);position:relative;overflow:hidden}
    .card::before{content:"";position:absolute;top:-60px;right:-60px;width:140px;height:140px;border-radius:999px;background:radial-gradient(circle at 30% 30%,#bbf7d0,rgba(22,163,74,0));opacity:.4;pointer-events:none}
    .card-header{display:flex;justify-content:space-between;align-items:baseline;gap:8px;margin-bottom:12px;position:relative;z-index:1}
    .card-title{font-size:16px;font-weight:700;display:flex;align-items:center;gap:8px}
    .card-badge{font-size:11px;padding:3px 8px;border-radius:999px;background:var(--primary-soft);color:var(--primary);border:1px solid rgba(34,197,94,0.4);text-transform:uppercase;letter-spacing:.05em}
    .card-subtitle{font-size:12px;color:var(--text-muted)}
    .today-meta{display:flex;justify-content:space-between;align-items:center;gap:10px;font-size:12px;margin-bottom:12px;color:var(--text-muted)}
    .today-meta span{display:inline-flex;align-items:center;gap:4px}
    .today-meta-isl{padding:4px 8px;border-radius:var(--radius-full);background:#f9fafb;border:1px dashed #e5e7eb}
    .timings-list{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;position:relative;z-index:1}
    @media(max-width:640px){.timings-list{grid-template-columns:repeat(2,minmax(0,1fr))}}
    .timing-item{padding:10px 11px;border-radius:16px;background:#f9fafb;border:1px solid #e5e7eb;display:flex;flex-direction:column;gap:3px}
    .timing-name{font-size:12px;font-weight:600;letter-spacing:.03em;text-transform:uppercase;color:var(--text-muted)}
    .timing-time{font-size:14px;font-weight:700}
    .timing-extra{font-size:11px;color:#22c55e}
    .timing-item.highlight{background:linear-gradient(135deg,#22c55e,#16a34a);border-color:rgba(21,128,61,.9);color:#ecfdf5;box-shadow:0 18px 35px rgba(21,128,61,.4)}
    .timing-item.highlight .timing-name,.timing-item.highlight .timing-extra{color:#dcfce7}
    .timing-item.highlight .timing-time{color:#ecfdf5}
    .table-wrapper{margin-top:10px;border-radius:16px;border:1px solid #e5e7eb;overflow:hidden;background:#f9fafb}
    .table-scroll{max-height:270px;overflow:auto}
    table{width:100%;border-collapse:collapse;font-size:12px}
    thead{background:#e5f9ef;position:sticky;top:0;z-index:1}
    th,td{padding:8px 10px;text-align:center;border-bottom:1px solid #e5e7eb;white-space:nowrap}
    th{font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.05em;color:#047857}
    tbody tr:nth-child(even){background:#f3f4f6}
    tbody tr.today-row{background:#dcfce7;font-weight:600}
    .info-section{display:flex;flex-direction:column;gap:16px}
    .pill-row{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}
    .pill{padding:4px 10px;border-radius:999px;font-size:11px;background:#f9fafb;border:1px dashed #e5e7eb;color:var(--text-muted)}
    .announcement-list{display:flex;flex-direction:column;gap:8px;margin-top:6px;position:relative;z-index:1}
    .announcement-item{padding:8px 10px;border-radius:14px;background:#f9fafb;border:1px solid #e5e7eb;font-size:12px}
    .ann-title{font-weight:600;margin-bottom:2px}
    .ann-meta{font-size:11px;color:var(--text-muted)}
    
   .map-container {
  margin-top: 8px;
  border-radius: 16px;
  border: 1px solid #e5e7eb;
  overflow: hidden;   /* important for rounded corners */
  height: 130px;
}

.map-container iframe {
  width: 500px;
  height: 130px;
  border: 0;
}
    
    .address{font-size:12px;color:var(--text-muted);margin-top:6px;line-height:1.4}
    .contact-row{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px;font-size:12px}
    .contact-row span{padding:4px 8px;border-radius:999px;background:#f9fafb;border:1px solid #e5e7eb}
    .footer{text-align:center;font-size:11px;color:var(--text-muted);padding:10px 4px 6px}
    .footer span{color:var(--primary);font-weight:600}
  </style>
</head>
<body>
  <div class="page">
    <!-- HEADER -->
    <header class="header">
      <div class="brand">
        <div class="brand-icon">
          <span>Ô∑≤</span>
        </div>
        <div class="brand-text">
          <div class="brand-title">SALAAH TIME, Sillod</div>
          <div class="brand-subtitle">Prayer Timetable & Announcements</div>
        </div>
      </div>
      <div class="header-right">
        <strong id="today-date"></strong>
        <span id="today-hijri">-- Hijri --</span>
      </div>
    </header>

    <!-- MAIN GRID -->
    <main class="grid">
      <!-- LEFT: TODAY & WEEK -->
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              Today‚Äôs Prayer Timings
              <span class="card-badge">Daily Schedule</span>
            </div>
            <div class="card-subtitle">
              Timings for <span id="city-name">SALAAH TIME, Sillod</span>
            </div>
          </div>
        </div>

        <div class="today-meta">
          <span>Location: <strong id="today-location">--</strong></span>
          <span class="today-meta-isl">Iqamah times shown</span>
        </div>

        <!-- Daily cards ‚Äì empty initially, JS will fill -->
        <div class="timings-list" id="timings-list">
          <!-- JS renders cards here -->
        </div>

        <!-- WEEK TABLE -->
        <div class="table-wrapper">
          <div class="card-header" style="padding: 10px 12px 6px;">
            <div class="card-title" style="font-size: 14px;">
              Weekly Timetable
            </div>
            <div class="card-subtitle">
              Data from backend (sample)
            </div>
          </div>
          <div class="table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Fajr</th>
                  <th>Dhuhr</th>
                  <th>Asr</th>
                  <th>Maghrib</th>
                  <th>Isha</th>
                  <th>Jumuah</th>
                </tr>
              </thead>
              <tbody id="week-body">
                <!-- JS will insert rows here -->
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- RIGHT: ANNOUNCEMENTS & LOCATION -->
      <section class="info-section">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Announcements</div>
              <div class="card-subtitle">
                Comes from Research
              </div>
            </div>
          </div>

          <div class="pill-row">
            <span class="pill">Jumuah Khutbah</span>
            <span class="pill">Programs</span>
            <span class="pill">Madarsa</span>
          </div>

          <div class="announcement-list" id="announcement-list">
            <!-- JS will fill announcements -->
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Location & Contact</div>
              <div class="card-subtitle">
                
              </div>
            </div>
          </div>

          <div class="map-container">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3742.096402447155!2d75.6480004750106!3d20.29627648117599!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bdbcd8e87413445%3A0xb5a89ade3e6d6dea!2sAbdul%20Samad%20Masjid!5e0!3m2!1sen!2sin!4v1768467504925!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>

          <div class="address" id="masjid-address">
            <!-- Masjid address from API -->
          </div>

          <div class="contact-row">
            <span id="masjid-phone">üìû 9372526677</span>
            <span id="masjid-email">üìß rangrezumair286@gmail.com</span>
            <span>‚è± Open for all 5 daily prayers</span>
          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
      ¬© <span>SALAAH TIME, Sillod</span> ‚Äî Prayer Timings Website
    </footer>
  </div>

  <!-- SIMPLE FRONTEND JS TO CALL BACKEND -->
   <script>
  const list = document.getElementById("timing-list");

  async function loadToday() {
    try {
      const res = await fetch("/api/timings/today");
      const data = await res.json();

      console.log("API DATA >>>", data);

      list.innerHTML = "";

      // agar prayers array nahi hai
      const prayers = data.prayers
        ? data.prayers
        : Object.keys(data).map((key) => ({
            name: key,
            adhan: data[key]?.adhan,
            iqamah: data[key]?.iqamah,
          }));

      prayers.forEach((p) => {
        const div = document.createElement("div");
        div.className =
          "timing-item" +
          (p.name.toLowerCase() === "maghrib" ? " highlight" : "");

        div.innerHTML = `
          <div class="timing-name">${p.name}</div>
          <div class="timing-time">${p.iqamah || "-"}</div>
          <div class="timing-extra">Adhan: ${p.adhan || "-"}</div>
        `;

        list.appendChild(div);
      });
    } catch (err) {
      console.error("Failed to load today timings", err);
    }
  }

  async function loadWeek() {
    const res = await fetch("/api/timings/week");
    const week = await res.json();
    const tbody = document.getElementById("week-body");
    tbody.innerHTML = "";

    weekTimetable.forEach((row, index) => {
      const tr = document.createElement("tr");
      if (index === 0) tr.className = "today-row";

      tr.innerHTML = `
        <td>${row.day}</td>
        <td>${row.fajr}</td>
        <td>${row.dhuhr}</td>
        <td>${row.asr}</td>
        <td>${row.maghrib}</td>
        <td>${row.isha}</td>
        <td>${row.jumuah}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  async function loadAnnouncements() {
    const res = await fetch("/api/announcements");
    const data = await res.json();
    const container = document.getElementById("announcement-list");
    container.innerHTML = "";

    data.forEach((ann) => {
      const div = document.createElement("div");
      div.className = "announcement-item";
      div.innerHTML = `
        <div class="ann-title">${ann.title}</div>
        <div class="ann-meta">${ann.text}</div>
      `;
      container.appendChild(div);
    });
  }

  async function loadMasjidInfo() {
      const res = await fetch("/api/masjid");
      const info = await res.json();

      document.getElementById("masjid-address").innerHTML = `
        <strong>${info.name}</strong><br />
        ${info.addressLine}
      `;
      document.getElementById("masjid-phone").textContent = "üìû " + info.phone;
      document.getElementById("masjid-email").textContent = "üìß " + info.email;
    }
  
</script>


     

  

</body>
</html>
